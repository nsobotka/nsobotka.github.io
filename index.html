<!DOCTYPE html>
<html>

<head>
    <title>Nathan Sobotka's Projects</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        let dragindex = 0;
        let dropindex = 0;
        let clone = "";

        function drag(e) {
            e.dataTransfer.setData("text", e.target.id);
        }

        function drop(e) {
            
            e.preventDefault();
            clone = e.target.cloneNode(true);
            let data = e.dataTransfer.getData("text");
            if (clone.id !== data) {
                let nodelist = document.getElementById("parent").childNodes;
                for (let i = 0; i < nodelist.length; i++) {
                    if (nodelist[i].id == data) {
                        dragindex = i;
                    }
                }

                document.getElementById("parent").replaceChild(document.getElementById(data), e.target);
                document.getElementById("parent").insertBefore(clone, document.getElementById("parent").childNodes[dragindex]);
                console.log(data);
                console.log(e.target.id);
                $.ajax({
                    type: 'POST', 
                    url: '/swap', 
                    data: {"box1": data, "box2" : e.target.id},
                });
                document.location.reload()
            }
        }

        function allowDrop(e) {
            e.preventDefault();
        }
    </script>
    <div id="title_text">WAFFLER</div>
    <div class="card" id="board_container">
        <div id="cell_flex">
            <div id="parent">
            </div>
        </div>
    </div>
    <div id="button_container">
        <div id="title_text">{{swaps}} SWAPS REMAINING</div>
        <div id="button_flex">
            <form action="/getActualWaffle" method="post">
                <button type="submit" class="toolBtn" id="getActualWaffle" onClick={}>Today's Waffle</button>
            </form>
            <form action="/newBoard" method="post">
                <button type="submit" class="toolBtn" id="newBoard" onClick={} action="/newBoard">New Board</button>
            </form>
            <form action="/loadCustom" method="post">
                <button type="submit" class="toolBtn" id="loadCustom" onClick={}>Load Custom</button>
            </form>
            <form action="/solve" method="post">
                <button type="submit" class="toolBtn" id="solve" onClick={}>Solve Board</button>
            </form>
            <form action="/reload" method="post">
                <button type="submit" class="toolBtn" id="reload" onClick={} action="/reload">Restart Current Board</button>
            </form>
        </div>
    </div>
</body>

</html>
